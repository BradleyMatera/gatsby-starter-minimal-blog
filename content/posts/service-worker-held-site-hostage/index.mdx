---
title: "Service Worker Bug: Full Fix From Cache to Clean"
date: "2025-04-12"
slug: "/service-worker-held-site-hostage"
tags: ["debugging", "web-development", "caching"]
description: "A full guide to finding and clearing a stale service worker."
theme: "Front-End & Full-Stack"
---

A stale service worker can make a correct deploy look broken.

This post shows the full fix from detection to cleanup.

You will get steps, verification, and common mistakes.

If your site shows old assets, this is for you.

## What this is

High level, a service worker can cache files to speed up repeat visits.

Low level, it is a script that runs in the background and can override new assets.

Key terms:

- **Service worker**: a background script that can cache responses.
- **Cache**: stored files the browser reuses.
- **Unregister**: removing the service worker from the browser.

## What you need

- The deployed site.
- Browser DevTools.
- Access to the repo or build.

Docs used:

- https://developer.mozilla.org/docs/Web/API/Service_Worker_API

## Start to finish

1) Open DevTools and go to Application.

Why: Service worker controls are there.

2) Check for an active service worker.

Why: You need to confirm it exists.

3) Unregister the worker.

Why: It stops the stale cache.

```js
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.getRegistrations().then((regs) => {
    regs.forEach((reg) => reg.unregister());
  });
}
```

4) Clear storage.

Why: Old caches can still linger.

5) Reload the site in a private window.

Why: It avoids cached state.

## Verify it worked

- The new assets load.
- The site reflects the latest deploy.
- The service worker list is empty.

If it still shows old assets, you have another cache layer.

## Common mistakes

- **Symptom**: Assets still old.
  **Cause**: Cache not cleared.
  **Fix**: Clear storage and reload.

- **Symptom**: Worker comes back.
  **Cause**: Offline plugin still enabled.
  **Fix**: Remove the plugin and rebuild.

- **Symptom**: Site breaks after unregister.
  **Cause**: App depends on cached data.
  **Fix**: Remove that dependency.

## Cheat sheet

- Check Application tab.
- Unregister worker.
- Clear storage.
- Reload in private window.

## Next steps

- Remove unused offline plugins.
- Add a deploy note about cache.

Related links:

- https://developer.mozilla.org/docs/Web/API/Service_Worker_API

Final CTA:

If you hit this bug, send me the steps you used and I will compare notes.
