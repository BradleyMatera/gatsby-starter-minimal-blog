---
title: "Building a React CRUD App with AWS API Gateway"
date: "2024-05-16"
slug: "/projects/react-anime-crud-app"
tags: ["Projects", "React", "AWS API Gateway", "CRUD"]
description: "How I wired a React SPA to AWS API Gateway and Lambda, secured the endpoints, and handled rich character data with client-side filtering and error recovery."
theme: "Front-End & Full-Stack"
---

## Introduction

Anime CRUD is a single-page React application that lets users catalogue characters, filter by roles, and pull reference data from the public Jikan API. The project demonstrates how a React front end can coexist with a serverless backend built on AWS API Gateway and Lambda. I deployed the UI to Vercel, proxied API requests to AWS, and focused on resilient data handling, security, and developer experience.

- **Live demo:** https://cruddemo-one.vercel.app/  
- **Source code:** https://github.com/BradleyMatera/ReactJSMobileApp (private repo; structure summarised below)

## Architecture Overview

| Layer | Technology | Notes |
| --- | --- | --- |
| Frontend | React 18, Hooks, Vite/Webpack | Form handling, modals, filtering, optimistic updates. |
| Backend | AWS API Gateway + Lambda (Node.js) | CRUD endpoints (`/characters`) storing records in DynamoDB. |
| External data | [Jikan API](https://jikan.moe/) | Fetches trending anime metadata. |
| Hosting | Vercel (frontend) + AWS | Vercel proxy routes API calls to API Gateway with custom headers. |

```
ReactJSMobileApp/
├── src/
│   ├── App.js           # Routes and layout
│   ├── api.js           # REST client (Axios)
│   ├── components/      # Cards, forms, modals
│   └── hooks/
│       └── useFetch.js  # Reusable data-fetching hook
├── vercel.json          # Proxy configuration
└── webpack.config.js    # Build pipeline
```

## Securing the Serverless API

AWS API Gateway fronts five Lambda handlers (GET/POST/PUT/DELETE). Each route enforces an API key, throttling, and input validation:

```json
{
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "https://i0p044nu8c.execute-api.us-east-1.amazonaws.com/prod/$1",
      "headers": {
        "x-api-key": "${API_GATEWAY_KEY}"
      }
    }
  ]
}
```

The key is injected at build time via Vercel environment variables, keeping secrets out of the client bundle. Lambda functions validate payloads, normalise category strings, and return structured errors so the front end can respond gracefully.

## Client-Side Data Flow

### Fetching Characters

```javascript
useEffect(() => {
  let isMounted = true;

  const fetchCharacters = async () => {
    try {
      setLoading(true);
      const response = await api.get('/api/characters');
      if (isMounted) {
        setCharacters(response.data);
      }
    } catch (err) {
      if (isMounted) {
        setError('Unable to load characters right now.');
      }
    } finally {
      if (isMounted) setLoading(false);
    }
  };

  fetchCharacters();
  return () => {
    isMounted = false;
  };
}, []);
```

The hook guards against state updates after unmounting, which prevents React warnings when navigating away mid-request.

### Optimistic Updates

```javascript
const handleUpdate = async (character) => {
  setCharacters((prev) =>
    prev.map((item) => (item.id === character.id ? character : item))
  );
  setShowUpdateModal(false);

  try {
    await api.put(`/api/characters/${character.id}`, character);
  } catch (error) {
    setError('Could not save changes. Reverting.');
    setCharacters((prev) => prevCache); // prevCache captured before optimistic update
  }
};
```

By applying local changes first and rolling back on failure, the UI feels responsive even when Lambda cold starts add latency.

### Filtering and Search

```javascript
const filteredCharacters = useMemo(() => {
  if (selectedCategory === 'all') return characters;
  return characters.filter((character) => {
    const category = character.category?.toLowerCase();
    const role = character.role?.toLowerCase();
    return category === selectedCategory || role === selectedCategory;
  });
}, [characters, selectedCategory]);
```

Combining `useMemo` with controlled inputs keeps the grid responsive even with large datasets.

## Integration with Jikan API

The app fetches trending anime titles from Jikan once per session, caches the results in state, and displays the top twelve entries with ratings, episodes, and cover art. Jikan’s rate limits are generous, but the client respects `Retry-After` headers and handles 429 responses by backing off.

## Deployment Notes

- **Vercel proxying** avoids CORS preflight complexity; headers are set server-side.  
- **Webpack customisations** provide path aliases and bundle analysis.  
- **Environment management** uses `.env.production` and `.env.development` files loaded through Vercel’s Secrets UI and AWS Parameter Store respectively.

## Challenges and Resolutions

| Challenge | Resolution | Impact |
| --- | --- | --- |
| CORS errors between Vercel and API Gateway | Proxy routes in `vercel.json`; API Gateway configured with `Access-Control-Allow-*` headers | Stable cross-origin communication |
| Exposing API keys in front-end | Injected `x-api-key` via Vercel server-side headers | Prevented client leaks | 
| Managing nested character data | Built controlled forms with JSON schema validation | Reduced runtime errors | 
| Slow cold starts | Added optimistic UI updates and loading skeletons | Improved perceived performance |

## Future Enhancements

1. Add Cognito-based authentication so users manage personal lists.  
2. Implement S3-backed image upload instead of relying on external URLs.  
3. Introduce serverless Offline support with DynamoDB Streams and caching.  
4. Replace Axios with the Fetch API and Suspense to simplify data flow.  
5. Publish infrastructure as Terraform modules for repeatable environments.

## References

- AWS, “Protecting REST APIs with API Keys,” https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-key.html.  
- AWS, “Using AWS Lambda with Amazon API Gateway,” https://docs.aws.amazon.com/lambda/latest/dg/services-apigateway.html.  
- Jikan Documentation, “Rate Limiting,” https://docs.api.jikan.moe/#section/Information/Rate-Limiting.
